{% extends 'base.html.twig' %}
{% block title %}{{'Les events'|trans}}
{% endblock %}
{% block body %}
	<div class="container mt-5">

		<h2 class="text-center mt-2">{{ 'Evenements'|trans }} </h2>
		<hr class="my-3">

		{% if isFranchise is defined and isFranchise is not null %}
			<h6 class="text-center mt-2">{{ 'Ajouter un evenement'|trans }} </h6>
			{{ form_start(form) }}
				<div class="pt-3 col-md-9 mx-auto px-auto">
					<div class="row d-flex align-items-center align-self-center mb-3 mx-auto">
						<div class="col-md-3"><strong>Nom de l'évenement</strong></div>
						<div class="col-md-9">{{ form_widget(form.name) }}</div>
					</div>

					<div class="row d-flex align-items-center mb-3 mx-auto">
						<div class="col-md-2"><strong>Début</strong></div>
						<div class="col-md-4">{{ form_widget(form.dateBegin) }}</div>
						<div class="col-md-2"><strong>Fin</strong></div>
						<div class="col-md-4">{{ form_widget(form.dateEnd) }}</div>
					</div>

					<div class="row d-flex align-items-center align-self-center mb-3 mx-auto">
						<div class="col-md-2"><strong>Addresse</strong></div>
						<div class="col-md-10">{{ form_widget(form.address) }}</div>
					</div>

					<div class="row d-flex align-items-center align-self-center mb-3 mx-auto">
						<div class="col-md-2"><strong>Description</strong></div>
						<div class="col-md-10">{{ form_widget(form.description) }}</div>
					</div>

					<div class="row d-flex align-items-center align-self-center mb-3 mx-auto">
						<div class="col-md-2"><strong>Image</strong></div>
						<div class="col-md-10">{{ form_widget(form.imageFile) }}</div>
					</div>

					<div class="row d-flex align-items-center align-self-center mb-3 mx-auto">
						<div class="col-md-2"><strong>Prix</strong></div>
						<div class="col-md-4">{{ form_widget(form.price) }}</div>

						<div class="offset-md-3 col-md-3">
							<button class="btn btn-primary" type="submit">
								Enregistrer<i class="far fa-paper-plane ml-2"></i>
							</button>
						</div>
					</div>
				</div>
			{{ form_end(form) }}
			<hr class="my-5">
		{% endif %}

		{% if events is defined and events is not empty %}
			<div class="d-flex align-items-stretch">
				{% for event in events %}	
					<div class="card mx-2" style="width: 18rem;">
						{% if vich_uploader_asset(event) is not null %}
							<img src="{{ vich_uploader_asset(event) }}" alt="{{ event.name }}" class="mt-3 img-fluid" />
						{% else %}
							{# mettre image par défaut #}
							<img class="img-fluid rounded" src="https://via.placeholder.com/150" alt="{{ event.name }}">
						{% endif %}
						<div class="card-body">
							<h5 class="card-title">{{ event.name }}</h5> 
							<p class="card-text">{{ event.description|length > 50 ? event.description|slice(0,50) ~'..' : event.description}}</p>
						  	<a href="{{ path('event_show', {'id': event.id }) }}" class="btn btn-primary">Voir plus</a>
						</div>
					  </div>
				{% endfor %}
			</div>
		{% else %}
			<h2>Aucun event existant</h2>
		{% endif %}
	</div>

	
{% endblock %}